{"ast":null,"code":"var _jsxFileName = \"/app/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\n// Timer presets in minutes\nconst TIMER_PRESETS = [1, 5, 10, 15, 30, 45, 60];\nconst SpotifyTimer = () => {\n  _s();\n  var _selectedTracks$curre, _selectedTracks$curre2, _selectedTracks$curre3, _selectedTracks$curre4, _selectedTracks$curre5, _selectedTracks$curre6, _selectedTracks$curre7, _selectedTracks$curre8;\n  // Authentication state\n  const [accessToken, setAccessToken] = useState(null);\n  const [refreshToken, setRefreshToken] = useState(null);\n  const [user, setUser] = useState(null);\n\n  // Track selection state\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedTracks, setSelectedTracks] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n\n  // Timer state\n  const [timerDuration, setTimerDuration] = useState(30); // minutes\n  const [playDuration, setPlayDuration] = useState(30); // seconds\n  const [timeRemaining, setTimeRemaining] = useState(30 * 60); // seconds\n  const [isTimerRunning, setIsTimerRunning] = useState(false);\n  const [currentTrackIndex, setCurrentTrackIndex] = useState(0);\n  const [trackPositions, setTrackPositions] = useState({}); // Store position for each track\n\n  // UI state\n  const [showSettings, setShowSettings] = useState(false);\n  const [currentlyPlaying, setCurrentlyPlaying] = useState(null);\n  const [devices, setDevices] = useState([]);\n  const [customTimerInput, setCustomTimerInput] = useState('');\n\n  // Refs for intervals\n  const timerIntervalRef = useRef(null);\n  const playbackIntervalRef = useRef(null);\n\n  // Initialize app\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n    if (code) {\n      handleAuthCallback(code);\n    } else {\n      // Try to load stored tokens\n      const storedAccessToken = localStorage.getItem('spotify_access_token');\n      const storedRefreshToken = localStorage.getItem('spotify_refresh_token');\n      if (storedAccessToken) {\n        setAccessToken(storedAccessToken);\n        setRefreshToken(storedRefreshToken);\n      }\n    }\n  }, []);\n\n  // Load user profile when access token is available\n  useEffect(() => {\n    if (accessToken) {\n      loadUserProfile();\n      loadDevices();\n      loadTimerSettings();\n    }\n  }, [accessToken]);\n\n  // Timer effect\n  useEffect(() => {\n    if (isTimerRunning && timeRemaining > 0) {\n      timerIntervalRef.current = setInterval(() => {\n        setTimeRemaining(prev => {\n          if (prev <= 1) {\n            // Timer reached zero - play track\n            playCurrentTrack();\n            return timerDuration * 60; // Reset timer\n          }\n          return prev - 1;\n        });\n      }, 1000);\n    } else {\n      if (timerIntervalRef.current) {\n        clearInterval(timerIntervalRef.current);\n      }\n    }\n    return () => {\n      if (timerIntervalRef.current) {\n        clearInterval(timerIntervalRef.current);\n      }\n    };\n  }, [isTimerRunning, timeRemaining, timerDuration]);\n\n  // Persist timer state\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.id) {\n      localStorage.setItem(`timer_state_${user.id}`, JSON.stringify({\n        timeRemaining,\n        isTimerRunning,\n        currentTrackIndex,\n        trackPositions\n      }));\n    }\n  }, [timeRemaining, isTimerRunning, currentTrackIndex, trackPositions, user === null || user === void 0 ? void 0 : user.id]);\n  const handleAuthCallback = async code => {\n    try {\n      const response = await axios.get(`${API}/auth/callback?code=${code}`);\n      const {\n        access_token,\n        refresh_token\n      } = response.data;\n      setAccessToken(access_token);\n      setRefreshToken(refresh_token);\n      localStorage.setItem('spotify_access_token', access_token);\n      localStorage.setItem('spotify_refresh_token', refresh_token);\n\n      // Clean up URL\n      window.history.replaceState({}, document.title, '/');\n    } catch (error) {\n      console.error('Auth callback error:', error);\n      alert('Authentication failed. Please try again.');\n    }\n  };\n  const handleLogin = async () => {\n    try {\n      const response = await axios.get(`${API}/auth/login`);\n      window.location.href = response.data.auth_url;\n    } catch (error) {\n      console.error('Login error:', error);\n      alert('Failed to start login process');\n    }\n  };\n  const loadUserProfile = async () => {\n    try {\n      const response = await axios.get(`${API}/spotify/user?access_token=${accessToken}`);\n      setUser(response.data);\n\n      // Load saved timer state\n      const savedState = localStorage.getItem(`timer_state_${response.data.id}`);\n      if (savedState) {\n        const state = JSON.parse(savedState);\n        setTimeRemaining(state.timeRemaining || timerDuration * 60);\n        setCurrentTrackIndex(state.currentTrackIndex || 0);\n        setTrackPositions(state.trackPositions || {});\n      }\n    } catch (error) {\n      console.error('Failed to load user profile:', error);\n      // Token might be expired, try to refresh\n      if (refreshToken) {\n        await refreshAccessToken();\n      }\n    }\n  };\n  const refreshAccessToken = async () => {\n    try {\n      const response = await axios.post(`${API}/auth/refresh`, {\n        refresh_token: refreshToken\n      });\n      const {\n        access_token\n      } = response.data;\n      setAccessToken(access_token);\n      localStorage.setItem('spotify_access_token', access_token);\n    } catch (error) {\n      console.error('Token refresh failed:', error);\n      // Clear tokens and require re-login\n      localStorage.removeItem('spotify_access_token');\n      localStorage.removeItem('spotify_refresh_token');\n      setAccessToken(null);\n      setRefreshToken(null);\n    }\n  };\n  const loadDevices = async () => {\n    try {\n      const response = await axios.get(`${API}/spotify/devices?access_token=${accessToken}`);\n      setDevices(response.data.devices || []);\n    } catch (error) {\n      console.error('Failed to load devices:', error);\n    }\n  };\n  const loadTimerSettings = async () => {\n    if (!(user !== null && user !== void 0 && user.id)) return;\n    try {\n      const response = await axios.get(`${API}/timer/settings/${user.id}`);\n      const settings = response.data;\n      setTimerDuration(settings.timer_duration_minutes);\n      setPlayDuration(settings.play_duration_seconds);\n      setSelectedTracks(settings.selected_tracks);\n    } catch (error) {\n      console.error('Failed to load timer settings:', error);\n    }\n  };\n  const saveTimerSettings = async () => {\n    if (!(user !== null && user !== void 0 && user.id)) return;\n    try {\n      await axios.post(`${API}/timer/settings`, {\n        user_id: user.id,\n        timer_duration_minutes: timerDuration,\n        play_duration_seconds: playDuration,\n        selected_tracks: selectedTracks\n      });\n    } catch (error) {\n      console.error('Failed to save timer settings:', error);\n    }\n  };\n  const searchTracks = async () => {\n    if (!searchQuery.trim()) return;\n    setIsSearching(true);\n    try {\n      const response = await axios.get(`${API}/spotify/search?q=${encodeURIComponent(searchQuery)}&access_token=${accessToken}`);\n      setSearchResults(response.data.tracks || []);\n    } catch (error) {\n      console.error('Search failed:', error);\n      alert('Search failed. Please try again.');\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const selectTrack = track => {\n    if (selectedTracks.length >= 5) {\n      alert('You can only select up to 5 tracks');\n      return;\n    }\n    if (selectedTracks.find(t => t.id === track.id)) {\n      alert('Track already selected');\n      return;\n    }\n    const newTracks = [...selectedTracks, track];\n    setSelectedTracks(newTracks);\n    saveTimerSettings();\n  };\n  const removeTrack = trackId => {\n    const newTracks = selectedTracks.filter(t => t.id !== trackId);\n    setSelectedTracks(newTracks);\n    saveTimerSettings();\n  };\n  const playCurrentTrack = async () => {\n    if (selectedTracks.length === 0) {\n      alert('Please select at least one track');\n      return;\n    }\n    const track = selectedTracks[currentTrackIndex];\n    const savedPosition = trackPositions[track.uri] || 0;\n    try {\n      await axios.post(`${API}/spotify/play?access_token=${accessToken}`, {\n        track_uri: track.uri,\n        position_ms: savedPosition\n      });\n      setCurrentlyPlaying(track);\n\n      // Set up playback monitoring\n      playbackIntervalRef.current = setInterval(async () => {\n        try {\n          const response = await axios.get(`${API}/spotify/playback?access_token=${accessToken}`);\n          const state = response.data;\n          if (state.is_playing && state.track) {\n            const newPosition = state.progress_ms;\n            const playedDuration = newPosition - savedPosition;\n\n            // Update track position\n            setTrackPositions(prev => ({\n              ...prev,\n              [track.uri]: newPosition\n            }));\n\n            // Save position to backend\n            await axios.post(`${API}/timer/track-position`, {\n              user_id: user.id,\n              track_uri: track.uri,\n              current_position_ms: newPosition\n            });\n\n            // Stop after play duration\n            if (playedDuration >= playDuration * 1000) {\n              await axios.post(`${API}/spotify/pause?access_token=${accessToken}`);\n              setCurrentlyPlaying(null);\n\n              // Move to next track for next cycle\n              setCurrentTrackIndex(prev => (prev + 1) % selectedTracks.length);\n              clearInterval(playbackIntervalRef.current);\n            }\n          }\n        } catch (error) {\n          console.error('Playback monitoring error:', error);\n        }\n      }, 1000);\n    } catch (error) {\n      console.error('Playback failed:', error);\n      alert('Playback failed. Make sure Spotify is open on a device.');\n    }\n  };\n  const startTimer = () => {\n    if (selectedTracks.length === 0) {\n      alert('Please select at least one track');\n      return;\n    }\n    setIsTimerRunning(true);\n    saveTimerSettings();\n  };\n  const stopTimer = () => {\n    setIsTimerRunning(false);\n    if (playbackIntervalRef.current) {\n      clearInterval(playbackIntervalRef.current);\n    }\n  };\n  const fullStop = async () => {\n    setIsTimerRunning(false);\n    setTimeRemaining(timerDuration * 60);\n    setCurrentTrackIndex(0);\n    setTrackPositions({});\n    setCurrentlyPlaying(null);\n    if (playbackIntervalRef.current) {\n      clearInterval(playbackIntervalRef.current);\n    }\n    try {\n      await axios.post(`${API}/spotify/pause?access_token=${accessToken}`);\n    } catch (error) {\n      console.error('Failed to pause:', error);\n    }\n  };\n  const applyCustomTimer = () => {\n    const minutes = parseInt(customTimerInput);\n    if (minutes >= 1 && minutes <= 120) {\n      setTimerDuration(minutes);\n      setTimeRemaining(minutes * 60);\n      setCustomTimerInput('');\n      saveTimerSettings();\n    } else {\n      alert('Please enter a valid number between 1 and 120 minutes');\n    }\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  const formatTrackDuration = ms => {\n    const seconds = Math.floor(ms / 1000);\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // If not authenticated, show login\n  if (!accessToken) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spotify-timer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"\\uD83C\\uDFB5 Spotify Timer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Play your favorite tracks on a custom timer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogin,\n          className: \"spotify-login-btn\",\n          children: \"Login with Spotify\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If no premium, show upgrade message\n  if (user && !user.is_premium) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spotify-timer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"premium-required\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Spotify Premium Required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"This app requires Spotify Premium to control playback.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://www.spotify.com/premium/\",\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          className: \"upgrade-btn\",\n          children: \"Upgrade to Premium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            localStorage.clear();\n            window.location.reload();\n          },\n          className: \"logout-btn\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"spotify-timer\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83C\\uDFB5 Spotify Timer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.display_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"settings-btn\",\n          onClick: () => setShowSettings(!showSettings),\n          children: \"\\u2699\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timer-display\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-remaining\",\n        children: formatTime(timeRemaining)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timer-info\",\n        children: [\"Timer: \", timerDuration, \" min | Play: \", playDuration, \"s | Track: \", currentTrackIndex + 1, \"/\", selectedTracks.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }, this), selectedTracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"current-track\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Current Track:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track-item\",\n        children: [((_selectedTracks$curre = selectedTracks[currentTrackIndex]) === null || _selectedTracks$curre === void 0 ? void 0 : (_selectedTracks$curre2 = _selectedTracks$curre.album) === null || _selectedTracks$curre2 === void 0 ? void 0 : (_selectedTracks$curre3 = _selectedTracks$curre2.images) === null || _selectedTracks$curre3 === void 0 ? void 0 : _selectedTracks$curre3[0]) && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: selectedTracks[currentTrackIndex].album.images[0].url,\n          alt: selectedTracks[currentTrackIndex].name,\n          className: \"track-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-name\",\n            children: (_selectedTracks$curre4 = selectedTracks[currentTrackIndex]) === null || _selectedTracks$curre4 === void 0 ? void 0 : _selectedTracks$curre4.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-artist\",\n            children: (_selectedTracks$curre5 = selectedTracks[currentTrackIndex]) === null || _selectedTracks$curre5 === void 0 ? void 0 : (_selectedTracks$curre6 = _selectedTracks$curre5.artists) === null || _selectedTracks$curre6 === void 0 ? void 0 : _selectedTracks$curre6.map(a => a.name).join(', ')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-position\",\n            children: [\"Position: \", formatTrackDuration(trackPositions[(_selectedTracks$curre7 = selectedTracks[currentTrackIndex]) === null || _selectedTracks$curre7 === void 0 ? void 0 : _selectedTracks$curre7.uri] || 0), \" /\", formatTrackDuration(((_selectedTracks$curre8 = selectedTracks[currentTrackIndex]) === null || _selectedTracks$curre8 === void 0 ? void 0 : _selectedTracks$curre8.duration_ms) || 0)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 11\n      }, this), currentlyPlaying && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"now-playing\",\n        children: [\"\\u25B6\\uFE0F Now Playing: \", playDuration, \"s segment\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startTimer,\n        disabled: isTimerRunning || selectedTracks.length === 0,\n        className: \"control-btn start-btn\",\n        children: \"START\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stopTimer,\n        disabled: !isTimerRunning,\n        className: \"control-btn stop-btn\",\n        children: \"STOP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fullStop,\n        className: \"control-btn full-stop-btn\",\n        children: \"FULL STOP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 7\n    }, this), showSettings && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"settings-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"setting-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Timer Duration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timer-presets\",\n          children: TIMER_PRESETS.map(minutes => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setTimerDuration(minutes);\n              setTimeRemaining(minutes * 60);\n              saveTimerSettings();\n            },\n            className: timerDuration === minutes ? 'preset-btn active' : 'preset-btn',\n            children: [minutes, \"m\"]\n          }, minutes, true, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"custom-timer\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: customTimerInput,\n            onChange: e => setCustomTimerInput(e.target.value),\n            placeholder: \"Custom minutes (1-120)\",\n            min: \"1\",\n            max: \"120\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: applyCustomTimer,\n            className: \"apply-btn\",\n            children: \"Apply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"setting-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Play Duration (seconds)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"10\",\n          max: \"60\",\n          value: playDuration,\n          onChange: e => {\n            setPlayDuration(parseInt(e.target.value));\n            saveTimerSettings();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [playDuration, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"track-selection\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Selected Tracks (\", selectedTracks.length, \"/5)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: searchQuery,\n            onChange: e => setSearchQuery(e.target.value),\n            placeholder: \"Search for tracks...\",\n            onKeyPress: e => e.key === 'Enter' && searchTracks()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: searchTracks,\n            disabled: isSearching,\n            children: isSearching ? 'Searching...' : 'Search'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 9\n      }, this), selectedTracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selected-tracks\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Your Tracks:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }, this), selectedTracks.map((track, index) => {\n          var _track$album, _track$album$images, _track$artists;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-item selected\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"track-number\",\n              children: [index + 1, \".\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 17\n            }, this), ((_track$album = track.album) === null || _track$album === void 0 ? void 0 : (_track$album$images = _track$album.images) === null || _track$album$images === void 0 ? void 0 : _track$album$images[2]) && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: track.album.images[2].url,\n              alt: track.name,\n              className: \"track-image-small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"track-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"track-name\",\n                children: track.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"track-artist\",\n                children: (_track$artists = track.artists) === null || _track$artists === void 0 ? void 0 : _track$artists.map(a => a.name).join(', ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeTrack(track.id),\n              className: \"remove-btn\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 17\n            }, this)]\n          }, track.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 11\n      }, this), searchResults.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-results\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Search Results:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 13\n        }, this), searchResults.map(track => {\n          var _track$album2, _track$album2$images, _track$artists2;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-item\",\n            children: [((_track$album2 = track.album) === null || _track$album2 === void 0 ? void 0 : (_track$album2$images = _track$album2.images) === null || _track$album2$images === void 0 ? void 0 : _track$album2$images[2]) && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: track.album.images[2].url,\n              alt: track.name,\n              className: \"track-image-small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"track-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"track-name\",\n                children: track.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"track-artist\",\n                children: (_track$artists2 = track.artists) === null || _track$artists2 === void 0 ? void 0 : _track$artists2.map(a => a.name).join(', ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"track-duration\",\n                children: formatTrackDuration(track.duration_ms)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => selectTrack(track),\n              disabled: selectedTracks.length >= 5 || selectedTracks.find(t => t.id === track.id),\n              className: \"select-btn\",\n              children: selectedTracks.find(t => t.id === track.id) ? 'Selected' : 'Select'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 17\n            }, this)]\n          }, track.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 410,\n    columnNumber: 5\n  }, this);\n};\n_s(SpotifyTimer, \"kXPPC75BkMySpdSwXHo8he9/cXo=\");\n_c = SpotifyTimer;\nexport default SpotifyTimer;\nvar _c;\n$RefreshReg$(_c, \"SpotifyTimer\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","TIMER_PRESETS","SpotifyTimer","_s","_selectedTracks$curre","_selectedTracks$curre2","_selectedTracks$curre3","_selectedTracks$curre4","_selectedTracks$curre5","_selectedTracks$curre6","_selectedTracks$curre7","_selectedTracks$curre8","accessToken","setAccessToken","refreshToken","setRefreshToken","user","setUser","searchQuery","setSearchQuery","searchResults","setSearchResults","selectedTracks","setSelectedTracks","isSearching","setIsSearching","timerDuration","setTimerDuration","playDuration","setPlayDuration","timeRemaining","setTimeRemaining","isTimerRunning","setIsTimerRunning","currentTrackIndex","setCurrentTrackIndex","trackPositions","setTrackPositions","showSettings","setShowSettings","currentlyPlaying","setCurrentlyPlaying","devices","setDevices","customTimerInput","setCustomTimerInput","timerIntervalRef","playbackIntervalRef","urlParams","URLSearchParams","window","location","search","code","get","handleAuthCallback","storedAccessToken","localStorage","getItem","storedRefreshToken","loadUserProfile","loadDevices","loadTimerSettings","current","setInterval","prev","playCurrentTrack","clearInterval","id","setItem","JSON","stringify","response","access_token","refresh_token","data","history","replaceState","document","title","error","console","alert","handleLogin","href","auth_url","savedState","state","parse","refreshAccessToken","post","removeItem","settings","timer_duration_minutes","play_duration_seconds","selected_tracks","saveTimerSettings","user_id","searchTracks","trim","encodeURIComponent","tracks","selectTrack","track","length","find","t","newTracks","removeTrack","trackId","filter","savedPosition","uri","track_uri","position_ms","is_playing","newPosition","progress_ms","playedDuration","current_position_ms","startTimer","stopTimer","fullStop","applyCustomTimer","minutes","parseInt","formatTime","seconds","mins","Math","floor","secs","toString","padStart","formatTrackDuration","ms","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","is_premium","target","rel","clear","reload","display_name","album","images","src","url","alt","name","artists","map","a","join","duration_ms","disabled","type","value","onChange","e","placeholder","min","max","onKeyPress","key","index","_track$album","_track$album$images","_track$artists","_track$album2","_track$album2$images","_track$artists2","_c","$RefreshReg$"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\n// Timer presets in minutes\nconst TIMER_PRESETS = [1, 5, 10, 15, 30, 45, 60];\n\nconst SpotifyTimer = () => {\n  // Authentication state\n  const [accessToken, setAccessToken] = useState(null);\n  const [refreshToken, setRefreshToken] = useState(null);\n  const [user, setUser] = useState(null);\n\n  // Track selection state\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedTracks, setSelectedTracks] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n\n  // Timer state\n  const [timerDuration, setTimerDuration] = useState(30); // minutes\n  const [playDuration, setPlayDuration] = useState(30); // seconds\n  const [timeRemaining, setTimeRemaining] = useState(30 * 60); // seconds\n  const [isTimerRunning, setIsTimerRunning] = useState(false);\n  const [currentTrackIndex, setCurrentTrackIndex] = useState(0);\n  const [trackPositions, setTrackPositions] = useState({}); // Store position for each track\n\n  // UI state\n  const [showSettings, setShowSettings] = useState(false);\n  const [currentlyPlaying, setCurrentlyPlaying] = useState(null);\n  const [devices, setDevices] = useState([]);\n  const [customTimerInput, setCustomTimerInput] = useState('');\n\n  // Refs for intervals\n  const timerIntervalRef = useRef(null);\n  const playbackIntervalRef = useRef(null);\n\n  // Initialize app\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n    \n    if (code) {\n      handleAuthCallback(code);\n    } else {\n      // Try to load stored tokens\n      const storedAccessToken = localStorage.getItem('spotify_access_token');\n      const storedRefreshToken = localStorage.getItem('spotify_refresh_token');\n      \n      if (storedAccessToken) {\n        setAccessToken(storedAccessToken);\n        setRefreshToken(storedRefreshToken);\n      }\n    }\n  }, []);\n\n  // Load user profile when access token is available\n  useEffect(() => {\n    if (accessToken) {\n      loadUserProfile();\n      loadDevices();\n      loadTimerSettings();\n    }\n  }, [accessToken]);\n\n  // Timer effect\n  useEffect(() => {\n    if (isTimerRunning && timeRemaining > 0) {\n      timerIntervalRef.current = setInterval(() => {\n        setTimeRemaining(prev => {\n          if (prev <= 1) {\n            // Timer reached zero - play track\n            playCurrentTrack();\n            return timerDuration * 60; // Reset timer\n          }\n          return prev - 1;\n        });\n      }, 1000);\n    } else {\n      if (timerIntervalRef.current) {\n        clearInterval(timerIntervalRef.current);\n      }\n    }\n\n    return () => {\n      if (timerIntervalRef.current) {\n        clearInterval(timerIntervalRef.current);\n      }\n    };\n  }, [isTimerRunning, timeRemaining, timerDuration]);\n\n  // Persist timer state\n  useEffect(() => {\n    if (user?.id) {\n      localStorage.setItem(`timer_state_${user.id}`, JSON.stringify({\n        timeRemaining,\n        isTimerRunning,\n        currentTrackIndex,\n        trackPositions\n      }));\n    }\n  }, [timeRemaining, isTimerRunning, currentTrackIndex, trackPositions, user?.id]);\n\n  const handleAuthCallback = async (code) => {\n    try {\n      const response = await axios.get(`${API}/auth/callback?code=${code}`);\n      const { access_token, refresh_token } = response.data;\n      \n      setAccessToken(access_token);\n      setRefreshToken(refresh_token);\n      \n      localStorage.setItem('spotify_access_token', access_token);\n      localStorage.setItem('spotify_refresh_token', refresh_token);\n      \n      // Clean up URL\n      window.history.replaceState({}, document.title, '/');\n    } catch (error) {\n      console.error('Auth callback error:', error);\n      alert('Authentication failed. Please try again.');\n    }\n  };\n\n  const handleLogin = async () => {\n    try {\n      const response = await axios.get(`${API}/auth/login`);\n      window.location.href = response.data.auth_url;\n    } catch (error) {\n      console.error('Login error:', error);\n      alert('Failed to start login process');\n    }\n  };\n\n  const loadUserProfile = async () => {\n    try {\n      const response = await axios.get(`${API}/spotify/user?access_token=${accessToken}`);\n      setUser(response.data);\n      \n      // Load saved timer state\n      const savedState = localStorage.getItem(`timer_state_${response.data.id}`);\n      if (savedState) {\n        const state = JSON.parse(savedState);\n        setTimeRemaining(state.timeRemaining || timerDuration * 60);\n        setCurrentTrackIndex(state.currentTrackIndex || 0);\n        setTrackPositions(state.trackPositions || {});\n      }\n    } catch (error) {\n      console.error('Failed to load user profile:', error);\n      // Token might be expired, try to refresh\n      if (refreshToken) {\n        await refreshAccessToken();\n      }\n    }\n  };\n\n  const refreshAccessToken = async () => {\n    try {\n      const response = await axios.post(`${API}/auth/refresh`, { refresh_token: refreshToken });\n      const { access_token } = response.data;\n      setAccessToken(access_token);\n      localStorage.setItem('spotify_access_token', access_token);\n    } catch (error) {\n      console.error('Token refresh failed:', error);\n      // Clear tokens and require re-login\n      localStorage.removeItem('spotify_access_token');\n      localStorage.removeItem('spotify_refresh_token');\n      setAccessToken(null);\n      setRefreshToken(null);\n    }\n  };\n\n  const loadDevices = async () => {\n    try {\n      const response = await axios.get(`${API}/spotify/devices?access_token=${accessToken}`);\n      setDevices(response.data.devices || []);\n    } catch (error) {\n      console.error('Failed to load devices:', error);\n    }\n  };\n\n  const loadTimerSettings = async () => {\n    if (!user?.id) return;\n    \n    try {\n      const response = await axios.get(`${API}/timer/settings/${user.id}`);\n      const settings = response.data;\n      \n      setTimerDuration(settings.timer_duration_minutes);\n      setPlayDuration(settings.play_duration_seconds);\n      setSelectedTracks(settings.selected_tracks);\n    } catch (error) {\n      console.error('Failed to load timer settings:', error);\n    }\n  };\n\n  const saveTimerSettings = async () => {\n    if (!user?.id) return;\n    \n    try {\n      await axios.post(`${API}/timer/settings`, {\n        user_id: user.id,\n        timer_duration_minutes: timerDuration,\n        play_duration_seconds: playDuration,\n        selected_tracks: selectedTracks\n      });\n    } catch (error) {\n      console.error('Failed to save timer settings:', error);\n    }\n  };\n\n  const searchTracks = async () => {\n    if (!searchQuery.trim()) return;\n    \n    setIsSearching(true);\n    try {\n      const response = await axios.get(`${API}/spotify/search?q=${encodeURIComponent(searchQuery)}&access_token=${accessToken}`);\n      setSearchResults(response.data.tracks || []);\n    } catch (error) {\n      console.error('Search failed:', error);\n      alert('Search failed. Please try again.');\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  const selectTrack = (track) => {\n    if (selectedTracks.length >= 5) {\n      alert('You can only select up to 5 tracks');\n      return;\n    }\n    \n    if (selectedTracks.find(t => t.id === track.id)) {\n      alert('Track already selected');\n      return;\n    }\n    \n    const newTracks = [...selectedTracks, track];\n    setSelectedTracks(newTracks);\n    saveTimerSettings();\n  };\n\n  const removeTrack = (trackId) => {\n    const newTracks = selectedTracks.filter(t => t.id !== trackId);\n    setSelectedTracks(newTracks);\n    saveTimerSettings();\n  };\n\n  const playCurrentTrack = async () => {\n    if (selectedTracks.length === 0) {\n      alert('Please select at least one track');\n      return;\n    }\n    \n    const track = selectedTracks[currentTrackIndex];\n    const savedPosition = trackPositions[track.uri] || 0;\n    \n    try {\n      await axios.post(`${API}/spotify/play?access_token=${accessToken}`, {\n        track_uri: track.uri,\n        position_ms: savedPosition\n      });\n      \n      setCurrentlyPlaying(track);\n      \n      // Set up playback monitoring\n      playbackIntervalRef.current = setInterval(async () => {\n        try {\n          const response = await axios.get(`${API}/spotify/playback?access_token=${accessToken}`);\n          const state = response.data;\n          \n          if (state.is_playing && state.track) {\n            const newPosition = state.progress_ms;\n            const playedDuration = newPosition - savedPosition;\n            \n            // Update track position\n            setTrackPositions(prev => ({\n              ...prev,\n              [track.uri]: newPosition\n            }));\n            \n            // Save position to backend\n            await axios.post(`${API}/timer/track-position`, {\n              user_id: user.id,\n              track_uri: track.uri,\n              current_position_ms: newPosition\n            });\n            \n            // Stop after play duration\n            if (playedDuration >= playDuration * 1000) {\n              await axios.post(`${API}/spotify/pause?access_token=${accessToken}`);\n              setCurrentlyPlaying(null);\n              \n              // Move to next track for next cycle\n              setCurrentTrackIndex(prev => (prev + 1) % selectedTracks.length);\n              \n              clearInterval(playbackIntervalRef.current);\n            }\n          }\n        } catch (error) {\n          console.error('Playback monitoring error:', error);\n        }\n      }, 1000);\n      \n    } catch (error) {\n      console.error('Playback failed:', error);\n      alert('Playback failed. Make sure Spotify is open on a device.');\n    }\n  };\n\n  const startTimer = () => {\n    if (selectedTracks.length === 0) {\n      alert('Please select at least one track');\n      return;\n    }\n    setIsTimerRunning(true);\n    saveTimerSettings();\n  };\n\n  const stopTimer = () => {\n    setIsTimerRunning(false);\n    if (playbackIntervalRef.current) {\n      clearInterval(playbackIntervalRef.current);\n    }\n  };\n\n  const fullStop = async () => {\n    setIsTimerRunning(false);\n    setTimeRemaining(timerDuration * 60);\n    setCurrentTrackIndex(0);\n    setTrackPositions({});\n    setCurrentlyPlaying(null);\n    \n    if (playbackIntervalRef.current) {\n      clearInterval(playbackIntervalRef.current);\n    }\n    \n    try {\n      await axios.post(`${API}/spotify/pause?access_token=${accessToken}`);\n    } catch (error) {\n      console.error('Failed to pause:', error);\n    }\n  };\n\n  const applyCustomTimer = () => {\n    const minutes = parseInt(customTimerInput);\n    if (minutes >= 1 && minutes <= 120) {\n      setTimerDuration(minutes);\n      setTimeRemaining(minutes * 60);\n      setCustomTimerInput('');\n      saveTimerSettings();\n    } else {\n      alert('Please enter a valid number between 1 and 120 minutes');\n    }\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const formatTrackDuration = (ms) => {\n    const seconds = Math.floor(ms / 1000);\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // If not authenticated, show login\n  if (!accessToken) {\n    return (\n      <div className=\"spotify-timer\">\n        <div className=\"login-container\">\n          <div className=\"logo\">\n            <h1>🎵 Spotify Timer</h1>\n            <p>Play your favorite tracks on a custom timer</p>\n          </div>\n          <button onClick={handleLogin} className=\"spotify-login-btn\">\n            Login with Spotify\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // If no premium, show upgrade message\n  if (user && !user.is_premium) {\n    return (\n      <div className=\"spotify-timer\">\n        <div className=\"premium-required\">\n          <h2>Spotify Premium Required</h2>\n          <p>This app requires Spotify Premium to control playback.</p>\n          <a href=\"https://www.spotify.com/premium/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"upgrade-btn\">\n            Upgrade to Premium\n          </a>\n          <button onClick={() => {\n            localStorage.clear();\n            window.location.reload();\n          }} className=\"logout-btn\">\n            Logout\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"spotify-timer\">\n      {/* Header */}\n      <div className=\"header\">\n        <h1>🎵 Spotify Timer</h1>\n        <div className=\"user-info\">\n          <span>Welcome, {user?.display_name}</span>\n          <button \n            className=\"settings-btn\"\n            onClick={() => setShowSettings(!showSettings)}\n          >\n            ⚙️\n          </button>\n        </div>\n      </div>\n\n      {/* Timer Display */}\n      <div className=\"timer-display\">\n        <div className=\"time-remaining\">\n          {formatTime(timeRemaining)}\n        </div>\n        <div className=\"timer-info\">\n          Timer: {timerDuration} min | Play: {playDuration}s | Track: {currentTrackIndex + 1}/{selectedTracks.length}\n        </div>\n      </div>\n\n      {/* Current Track Info */}\n      {selectedTracks.length > 0 && (\n        <div className=\"current-track\">\n          <h3>Current Track:</h3>\n          <div className=\"track-item\">\n            {selectedTracks[currentTrackIndex]?.album?.images?.[0] && (\n              <img \n                src={selectedTracks[currentTrackIndex].album.images[0].url} \n                alt={selectedTracks[currentTrackIndex].name}\n                className=\"track-image\"\n              />\n            )}\n            <div className=\"track-details\">\n              <div className=\"track-name\">{selectedTracks[currentTrackIndex]?.name}</div>\n              <div className=\"track-artist\">\n                {selectedTracks[currentTrackIndex]?.artists?.map(a => a.name).join(', ')}\n              </div>\n              <div className=\"track-position\">\n                Position: {formatTrackDuration(trackPositions[selectedTracks[currentTrackIndex]?.uri] || 0)} / \n                {formatTrackDuration(selectedTracks[currentTrackIndex]?.duration_ms || 0)}\n              </div>\n            </div>\n          </div>\n          {currentlyPlaying && (\n            <div className=\"now-playing\">\n              ▶️ Now Playing: {playDuration}s segment\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Controls */}\n      <div className=\"controls\">\n        <button \n          onClick={startTimer} \n          disabled={isTimerRunning || selectedTracks.length === 0}\n          className=\"control-btn start-btn\"\n        >\n          START\n        </button>\n        <button \n          onClick={stopTimer} \n          disabled={!isTimerRunning}\n          className=\"control-btn stop-btn\"\n        >\n          STOP\n        </button>\n        <button \n          onClick={fullStop}\n          className=\"control-btn full-stop-btn\"\n        >\n          FULL STOP\n        </button>\n      </div>\n\n      {/* Settings Panel */}\n      {showSettings && (\n        <div className=\"settings-panel\">\n          <h3>Settings</h3>\n          \n          {/* Timer Duration */}\n          <div className=\"setting-group\">\n            <label>Timer Duration</label>\n            <div className=\"timer-presets\">\n              {TIMER_PRESETS.map(minutes => (\n                <button\n                  key={minutes}\n                  onClick={() => {\n                    setTimerDuration(minutes);\n                    setTimeRemaining(minutes * 60);\n                    saveTimerSettings();\n                  }}\n                  className={timerDuration === minutes ? 'preset-btn active' : 'preset-btn'}\n                >\n                  {minutes}m\n                </button>\n              ))}\n            </div>\n            <div className=\"custom-timer\">\n              <input\n                type=\"number\"\n                value={customTimerInput}\n                onChange={(e) => setCustomTimerInput(e.target.value)}\n                placeholder=\"Custom minutes (1-120)\"\n                min=\"1\"\n                max=\"120\"\n              />\n              <button onClick={applyCustomTimer} className=\"apply-btn\">Apply</button>\n            </div>\n          </div>\n\n          {/* Play Duration */}\n          <div className=\"setting-group\">\n            <label>Play Duration (seconds)</label>\n            <input\n              type=\"range\"\n              min=\"10\"\n              max=\"60\"\n              value={playDuration}\n              onChange={(e) => {\n                setPlayDuration(parseInt(e.target.value));\n                saveTimerSettings();\n              }}\n            />\n            <span>{playDuration}s</span>\n          </div>\n        </div>\n      )}\n\n      {/* Track Selection */}\n      <div className=\"track-selection\">\n        <h3>Selected Tracks ({selectedTracks.length}/5)</h3>\n        \n        {/* Search */}\n        <div className=\"search-section\">\n          <div className=\"search-input\">\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Search for tracks...\"\n              onKeyPress={(e) => e.key === 'Enter' && searchTracks()}\n            />\n            <button onClick={searchTracks} disabled={isSearching}>\n              {isSearching ? 'Searching...' : 'Search'}\n            </button>\n          </div>\n        </div>\n\n        {/* Selected Tracks */}\n        {selectedTracks.length > 0 && (\n          <div className=\"selected-tracks\">\n            <h4>Your Tracks:</h4>\n            {selectedTracks.map((track, index) => (\n              <div key={track.id} className=\"track-item selected\">\n                <span className=\"track-number\">{index + 1}.</span>\n                {track.album?.images?.[2] && (\n                  <img src={track.album.images[2].url} alt={track.name} className=\"track-image-small\" />\n                )}\n                <div className=\"track-info\">\n                  <div className=\"track-name\">{track.name}</div>\n                  <div className=\"track-artist\">{track.artists?.map(a => a.name).join(', ')}</div>\n                </div>\n                <button onClick={() => removeTrack(track.id)} className=\"remove-btn\">×</button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Search Results */}\n        {searchResults.length > 0 && (\n          <div className=\"search-results\">\n            <h4>Search Results:</h4>\n            {searchResults.map((track) => (\n              <div key={track.id} className=\"track-item\">\n                {track.album?.images?.[2] && (\n                  <img src={track.album.images[2].url} alt={track.name} className=\"track-image-small\" />\n                )}\n                <div className=\"track-info\">\n                  <div className=\"track-name\">{track.name}</div>\n                  <div className=\"track-artist\">{track.artists?.map(a => a.name).join(', ')}</div>\n                  <div className=\"track-duration\">{formatTrackDuration(track.duration_ms)}</div>\n                </div>\n                <button \n                  onClick={() => selectTrack(track)} \n                  disabled={selectedTracks.length >= 5 || selectedTracks.find(t => t.id === track.id)}\n                  className=\"select-btn\"\n                >\n                  {selectedTracks.find(t => t.id === track.id) ? 'Selected' : 'Select'}\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SpotifyTimer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}